<!DOCTYPE html>
<html lang="en">
	<head>
		{% block head %}

		<meta charset="utf-8">
		<title>Sage</title>
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="Samuel Ainsworth">

		<!-- styles -->
		<link href="/data/bootstrap-2.0.4/css/bootstrap.min.css" rel="stylesheet">
		<link href="/data/bootstrap-2.0.4/css/bootstrap-responsive.min.css" rel="stylesheet">

		<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<!-- fav and touch icons -->
		<!-- these should be customized for sage -->
		<link rel="shortcut icon" href="/data/sage/images/favicon.ico">
		<!-- <link rel="apple-touch-icon-precomposed" sizes="144x144" href="bootstrap/ico/apple-touch-icon-144-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootstrap/ico/apple-touch-icon-114-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootstrap/ico/apple-touch-icon-72-precomposed.png">
		<link rel="apple-touch-icon-precomposed" href="bootstrap/ico/apple-touch-icon-57-precomposed.png"> -->
		
		<!-- LESS -->
		<link href="/data/sage/less/main.less" rel="stylesheet/less">
		<script src="/data/less-1.3.0.min.js" type="text/javascript"></script>

		{% endblock head %}
	</head>

	<body>

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="/" style="padding-bottom: 0; padding-top: 5px; padding-right: 0;"><img src="/data/sage/images/headerlogo.png" alt="" width="113" height="30"></a>
					<div class="nav-collapse">
						{% block navbar %}

						{# TODO this should be conditional on whether or not the user is logged in #}
						{% if True %}
							{% include 'html/user_navbar_area.html' %}
						{% else %}
							<!-- user is not logged in -->
						{% endif %}

						{% endblock navbar %}
					</div><!--/.nav-collapse -->
				</div><!--/.container -->
			</div><!--/.navbar-inner -->
		</div><!--/.navbar -->

		<div class="alert_container">
			<div class="alert_container_inner">
				{% include 'html/alerts/connection_alert.html' %}

				{% block alerts %}
				{% endblock alerts %}
			</div>
		</div>

		<div class="the_container">
			{% block container %}
				{% block before_page %}
				{% endblock before_page %}

			<div class="the_page">
				{% block page %}
				{% endblock page %}
			</div> <!-- /the_page -->
			{% endblock container %}
		</div> <!-- /the_container -->


		{% block after_container %}
		{% endblock after_container %}

		<!-- javascript
		================================================== -->
		<!-- Placed at the end of the document (as much as possible) so the pages load faster -->
		
		<!-- Translations. This has Jinja templating in it so it can't be bundled -->
		<script type="text/javascript" src="/data/sage/js/localization.js"></script>

		{# TODO make this only when not in debug mode #}
		{% assets filters="rjsmin", output="webassets_generated/base.js",
			"jquery-1.7.2.min.js",
			"bootstrap-2.0.4/js/bootstrap.min.js",
			"jeresig-jquery.hotkeys-0451de1/jquery.hotkeys.js",
			"sage/js/misc.js",
			"sage/js/async_lib.js",
			"json/json2.min.js",
			"sage/js/sagenb.js"
		%}
			<script type="text/javascript" src="{{ ASSET_URL }}"></script>
		{% endassets %}



		{#
		<!-- LESS -->
		<!-- <script src="/data/less-1.3.0.min.js" type="text/javascript"></script> -->

		<!-- jQuery -->
		<script type="text/javascript" src="/data/jquery-1.7.2.min.js"></script>

		<!-- Bootstrap stuff -->
		<script src="/data/bootstrap-2.0.4/js/bootstrap.min.js"></script>

		<!-- Hotkeys -->
		<script type="text/javascript" src="/data/jeresig-jquery.hotkeys-0451de1/jquery.hotkeys.js"></script>

		<!-- Translations -->
		<script type="text/javascript" src="/data/sage/js/localization.js"></script>

		<!-- Misc Functions -->
		<script type="text/javascript" src="/data/sage/js/misc.js"></script>

		<!-- Async Requests -->
		<script type="text/javascript" src="/data/sage/js/async_lib.js"></script>

		<!-- JSON parsing -->
		<script type="text/javascript" src="/data/json/json2.min.js"></script>

		<!-- Sage NB -->
		<script type="text/javascript" src="/data/sage/js/sagenb.js"></script>
		#}

		{% block extra_javascript %}
		{% endblock extra_javascript %}
	</body>
</html>
